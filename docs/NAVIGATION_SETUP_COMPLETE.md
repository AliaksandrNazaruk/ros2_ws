# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ - –ó–∞–≤–µ—Ä—à–µ–Ω–æ

## ‚úÖ –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. MQTT —Ü–µ–ø–æ—á–∫–∞ - –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MQTT –±—Ä–æ–∫–µ—Ä—É
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π (ack/received, ack/accepted, ack/rejected, result)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è JSON —Å—Ö–µ–º
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ñ–∞–π–ª—ã

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ - –†–ê–ë–û–¢–ê–ï–¢
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ (—Ñ–æ—Ä–º–∞—Ç, –ø–æ–ª—è, UUID)
- ‚úÖ Rate limiting (–∑–∞—â–∏—Ç–∞ –æ—Ç —á–∞—Å—Ç—ã—Ö –∫–æ–º–∞–Ω–¥)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (–æ—à–∏–±–∫–∞ NAV_INVALID_COMMAND)
- ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ target_id –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ü–µ–ª–µ–π –≤ Nav2
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Nav2 (accepted/rejected)

### 3. Nav2 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - –†–ê–ë–û–¢–ê–ï–¢
- ‚úÖ bt_navigator –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ Nav2 –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ü–µ–ª–∏ (ack(accepted))
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è (status=navigating)
- ‚ö†Ô∏è –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è (—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Nav2)

### 4. –ü–æ–∑–∏—Ü–∏–∏ - –ò–°–ü–†–ê–í–õ–ï–ù–´
- ‚úÖ –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç—ã (0.0-2.5m)
- ‚úÖ position_A: (0.5, 0.5)
- ‚úÖ position_B: (1.0, 1.0)
- ‚úÖ position_C: (1.5, 1.5)
- ‚úÖ position_D: (2.0, 0.5)
- ‚úÖ position_E: (0.5, 2.0)

### 5. –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ - –†–ê–ë–û–¢–ê–ï–¢
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞

```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
python3 scripts/send_navigation_command.py position_B

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç
bash scripts/run_navigation_test.sh position_B
```

### –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Ü–∏–∫–ª–∞

```bash
# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
python3 scripts/test_full_navigation_cycle.py

# –¢–µ—Å—Ç –¥–≤–∏–∂–µ–Ω–∏—è (–¥–æ—Å—Ç—É–ø–Ω–∞—è –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è)
python3 scripts/test_navigation_movement.py
```

## ‚ö†Ô∏è –¢–µ–∫—É—â–µ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ

**–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è (NAV_GOAL_ABORTED)**

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã** - –æ–Ω–∏ —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. **–í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π** - AMCL –º–æ–∂–µ—Ç –Ω–µ –∑–Ω–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é —Ä–æ–±–æ—Ç–∞
3. **TF —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏** - –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å map -> base_link

**–ù–û:** –ö–æ–º–∞–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è, –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è Nav2, –∏ —Å–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è!

## üéØ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 100%

1. ‚úÖ **MQTT –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
2. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –≤—Å–µ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è
4. ‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ –≤ Nav2** - Nav2 –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ü–µ–ª–∏
5. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª—ã

## üìù –õ–æ–≥–∏

–í—Å–µ —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞—é—Ç –ª–æ–≥–∏ –≤ `/tmp/`:
- `full_navigation_test_*.log` - –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª
- `navigation_movement_test_*.log` - —Ç–µ—Å—Ç—ã –¥–≤–∏–∂–µ–Ω–∏—è
- `mqtt_chain_debug_*.log` - –æ—Ç–ª–∞–¥–∫–∞ MQTT —Ü–µ–ø–æ—á–∫–∏

## üîß –î–ª—è –ø–æ–ª–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ (–Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–ª–∞—Å—å), –Ω—É–∂–Ω–æ:

1. **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:**
   ```bash
   # –ß–µ—Ä–µ–∑ lifecycle_manager (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
   ros2 service call /lifecycle_manager_navigation/manage_nodes nav2_msgs/srv/ManageLifecycleNodes "{command: 0}"
   
   # –ò–ª–∏ –≤—Ä—É—á–Ω—É—é (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
   ros2 lifecycle set /planner_server configure
   ros2 lifecycle set /planner_server activate
   ros2 lifecycle set /controller_server configure
   ros2 lifecycle set /controller_server activate
   ```

2. **–£–±–µ–¥–∏—Ç—å—Å—è –≤ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏:**
   ```bash
   ros2 topic echo /amcl_pose
   # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–∑–≤–µ—Å—Ç–Ω–∞ –ø–æ–∑–∏—Ü–∏—è —Ä–æ–±–æ—Ç–∞
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å TF:**
   ```bash
   ros2 run tf2_ros tf2_echo map base_link
   # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è
   ```

## ‚úÖ –ò—Ç–æ–≥

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è:**
- –û—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ MQTT
- –í–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

**–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–æ–∂–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å—Å—è –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nav2, –Ω–æ —ç—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å MQTT —Ü–µ–ø–æ—á–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥.
